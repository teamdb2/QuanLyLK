CREATE TABLE QLLK1.CHUCVU(
	MACV VARCHAR(4) NOT NULL,
	TENCV VARCHAR(20) NOT NULL,
	CONSTRAINT PK_CV PRIMARY KEY(MACV)
);
GRANT ALL ON TABLE QLLK1.CHUCVU TO DB2ADMIN;

CREATE TABLE QLLK1.LINHKIEN(
	MALINHKIEN VARCHAR(20) NOT NULL,
	TENLINHKIEN VARCHAR(50) NOT NULL,
	NHANHIEU VARCHAR(50) NOT NULL,
	THONGSOKYTHUAT	VARCHAR(100) NOT NULL,
	GIABAN INTEGER NOT NULL,
	GIANHAP INTEGER NOT NULL,
	CONSTRAINT PK_QLLK1 PRIMARY KEY(MALINHKIEN)
);
GRANT ALL ON TABLE QLLK1.LINHKIEN TO DB2ADMIN;

CREATE TABLE QLLK1.NHACUNGCAP(
	MANCC VARCHAR(20) NOT NULL,
	TENNCC VARCHAR(50) NOT NULL,
	DIACHI VARCHAR(50) NOT NULL,
	CONSTRAINT FK_NCC PRIMARY KEY(MANCC)
);
GRANT ALL ON TABLE QLLK1.NHACUNGCAP TO DB2ADMIN;


CREATE TABLE QLLK1.NHANVIEN(
	MANV VARCHAR(4) NOT NULL,
	TENNHANVIEN VARCHAR(100) NOT NULL,
	EMAIL VARCHAR(50) NOT NULL,
	MACV VARCHAR(4) NOT NULL,
	CONSTRAINT PK_NV PRIMARY KEY(MANV),
	CONSTRAINT FK_NV_CV FOREIGN KEY(MACV) REFERENCES QLLK1.CHUCVU(MACV)
);
GRANT ALL ON TABLE QLLK1.NHANVIEN TO DB2ADMIN;
CREATE TABLE QLLK1.DONDATHANG(
	MADDH VARCHAR(20) NOT NULL,
	TENDDH VARCHAR(50) NOT NULL,
	MANV VARCHAR(4) NOT NULL,
	MANCC VARCHAR(20) NOT NULL,
	SOLUONG INTEGER NOT NULL,
	NGAYLAP DATE NOT NULL,
	CONSTRAINT PK_DH PRIMARY KEY(MADDH),
	CONSTRAINT FK_DH_NCC FOREIGN KEY(MANCC) REFERENCES QLLK1.NHACUNGCAP(MANCC),
	CONSTRAINT FK_DH_NV FOREIGN KEY(MANV) REFERENCES QLLK1.NHANVIEN(MANV)
);
GRANT ALL ON TABLE QLLK1.DONDATHANG TO DB2ADMIN;


CREATE TABLE QLLK1.PHIEUBAOHANH(
	MAPBH VARCHAR(10) NOT NULL,
	MALINHKIEN VARCHAR(20) NOT NULL,
	TENKH VARCHAR(100) NOT NULL,
	THOIGIANBAOHANH INTEGER NOT NULL,
	NGAYMUA DATE NOT NULL,
	NGAYHETHAN DATE NOT NULL,
	CONSTRAINT PK_PBH PRIMARY KEY(MAPBH),
	CONSTRAINT FK_PBH_QLLK1 FOREIGN KEY(MALINHKIEN) REFERENCES QLLK1.LINHKIEN(MALINHKIEN)

);
GRANT ALL ON TABLE QLLK1.PHIEUBAOHANH TO DB2ADMIN;


CREATE TABLE QLLK1.KHACHHANG(
	MAKH VARCHAR(4) NOT NULL,
	TENKHACHHNAG VARCHAR(100) NOT NULL,
	GIOITINH CHAR(1) NOT NULL,
	DIACHI VARCHAR(50) NOT NULL,
	SDT INTEGER NOT NULL,
	CONSTRAINT PK_KH PRIMARY KEY(MAKH)
);
GRANT ALL ON TABLE QLLK1.KHACHHANG TO DB2ADMIN;


CREATE TABLE QLLK1.HOADONBANLE(
	MAHDBL VARCHAR(10) NOT NULL,
	MANV VARCHAR(4) NOT NULL,
	MAKH VARCHAR(4) NOT NULL,
	TONGTIEN INTEGER NOT NULL,
	NGAYBAN DATE NOT NULL,
	CONSTRAINT PK_HDBL PRIMARY KEY(MAHDBL),
	CONSTRAINT FK_HDBL_NV FOREIGN KEY(MANV) REFERENCES QLLK1.NHANVIEN(MANV),
	CONSTRAINT FK_HDBL_KH FOREIGN KEY(MAKH) REFERENCES QLLK1.KHACHHANG(MAKH)
	
);
GRANT ALL ON TABLE QLLK1.HOADONBANLE TO DB2ADMIN;

CREATE TABLE QLLK1.CTHDBANLE(
	ID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY(START WITH 1, INCREMENT BY 1, NO CACHE),
	MALINHKIEN VARCHAR(20) NOT NULL,
	MAHDBL VARCHAR(10) NOT NULL,
	DONGIA INTEGER NOT NULL,
	SOLUONG INTEGER NOT NULL,
	GIAMGIA INTEGER NOT NULL,
	TONGTIEN INTEGER NOT NULL,
	NGAYBAN DATE NOT NULL,
	CONSTRAINT PK_CTHDBL PRIMARY KEY(MAHDBL),
	CONSTRAINT FK_CTHDBL_QLLK1 FOREIGN KEY(MALINHKIEN) REFERENCES QLLK1.LINHKIEN(MALINHKIEN),
	CONSTRAINT FK_CTHDBL_HDBL FOREIGN KEY(MAHDBL) REFERENCES QLLK1.HOADONBANLE(MAHDBL)
	
);
GRANT ALL ON TABLE QLLK1.CTHDBANLE TO DB2ADMIN;

CREATE TABLE QLLK1.HOADONBANSI(
	MAHDBS VARCHAR(10) NOT NULL,
	MANV VARCHAR(4) NOT NULL,
	MAKH VARCHAR(4) NOT NULL,
	SOLANTRA INTEGER NOT NULL,
	TONGTIEN INTEGER NOT NULL,
	NGAYLAP DATE NOT NULL,
	CONSTRAINT PK_HDBS PRIMARY KEY(MAHDBS),
	CONSTRAINT FK_HDBS_NV FOREIGN KEY(MANV) REFERENCES QLLK1.NHANVIEN(MANV),
	CONSTRAINT FK_HDBS_KH FOREIGN KEY(MAKH) REFERENCES QLLK1.KHACHHANG(MAKH)
);
GRANT ALL ON TABLE QLLK1.HOADONBANSI TO DB2ADMIN;
CREATE TABLE QLLK1.CTHDBANSI(
	ID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY(START WITH 1, INCREMENT BY 1, NO CACHE),
	MALINHKIEN VARCHAR(20) NOT NULL,
	MAHDBS VARCHAR(10) NOT NULL,
	DONGIA INTEGER NOT NULL,
	SOLUONG INTEGER NOT NULL,
	GIAMGIA INTEGER NOT NULL,
	TONGTIEN INTEGER NOT NULL,
	SOLANTRA INTEGER NOT NULL,
	NGAYLAP DATE NOT NULL,
	CONSTRAINT PK_CTHDBS PRIMARY KEY(ID),
	CONSTRAINT FK_CTHDBS_QLLK1 FOREIGN KEY(MALINHKIEN) REFERENCES QLLK1.LINHKIEN(MALINHKIEN),
	CONSTRAINT FK_CTHDBS_HDBS FOREIGN KEY(MAHDBS) REFERENCES QLLK1.HOADONBANSI(MAHDBS)
	
);

GRANT ALL ON TABLE QLLK1.CTHDBANSI TO DB2ADMIN;

CREATE TABLE QLLK1.TAIKHOAN(
	ID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY(START WITH 1, INCREMENT BY 1, NO CACHE),
	MANV VARCHAR(4) NOT NULL,
	MATKHAU VARCHAR(100) NOT NULL,
	QUYEN SMALLINT NOT NULL,
	CONSTRAINT PK_TK PRIMARY KEY(ID),
	CONSTRAINT FK_TK_NV FOREIGN KEY(MANV) REFERENCES QLLK1.NHANVIEN(MANV)
);

