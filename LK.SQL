CREATE TABLE LK.CHUCVU(
	MACV VARCHAR(4) NOT NULL,
	TENCV VARCHAR(20) NOT NULL,
	CONSTRAINT PK_CV PRIMARY KEY(MACV)
);
GRANT ALL ON TABLE LK.CHUCVU TO DB2ADMIN;

CREATE TABLE LK.LINHKIEN(
	MALINHKIEN VARCHAR(20) NOT NULL,
	TENLINHKIEN VARCHAR(50) NOT NULL,
	NHANHIEU VARCHAR(50) NOT NULL,
	THONGSOKYTHUAT	VARCHAR(100) NOT NULL,
	GIABAN INTEGER NOT NULL,
	GIANHAP INTEGER NOT NULL,
	CONSTRAINT PK_LK PRIMARY KEY(MALINHKIEN)
);
GRANT ALL ON TABLE LK.LINHKIEN TO DB2ADMIN;

CREATE TABLE LK.NHACUNGCAP(
	MANCC VARCHAR(20) NOT NULL,
	TENNCC VARCHAR(50) NOT NULL,
	DIACHI VARCHAR(50) NOT NULL,
	CONSTRAINT FK_NCC PRIMARY KEY(MANCC)
);
GRANT ALL ON TABLE LK.NHACUNGCAP TO DB2ADMIN;


CREATE TABLE LK.NHANVIEN(
	MANV VARCHAR(4) NOT NULL,
	TENNHANVIEN VARCHAR(100) NOT NULL,
	EMAIL VARCHAR(50) NOT NULL,
	GIOITINH CHAR(1) NOT NULL,
	NGAYSINH DATE NOT NULL,
	MACV VARCHAR(4) NOT NULL,
	NGAYVAOLAM DATE NOT NULL,
	CONSTRAINT PK_NV PRIMARY KEY(MANV),
	CONSTRAINT FK_NV_CV FOREIGN KEY(MACV) REFERENCES LK.CHUCVU(MACV)
);
GRANT ALL ON TABLE LK.NHANVIEN TO DB2ADMIN;
CREATE TABLE LK.DONDATHANG(
	MADDH VARCHAR(20) NOT NULL,
	TENDDH VARCHAR(50) NOT NULL,
	MANV VARCHAR(4) NOT NULL,
	MANCC VARCHAR(20) NOT NULL,
	SOLUONG INTEGER NOT NULL,
	NGAYLAP DATE NOT NULL,
	CONSTRAINT PK_DH PRIMARY KEY(MADDH),
	CONSTRAINT FK_DH_NCC FOREIGN KEY(MANCC) REFERENCES LK.NHACUNGCAP(MANCC),
	CONSTRAINT FK_DH_NV FOREIGN KEY(MANV) REFERENCES LK.NHANVIEN(MANV)
);
GRANT ALL ON TABLE LK.DONDATHANG TO DB2ADMIN;


CREATE TABLE LK.PHIEUBAOHANH(
	MAPBH VARCHAR(10) NOT NULL,
	TENlINHKIEN VARCHAR(50) NOT NULL,
	MAKH VARCHAR(4) NOT NULL,
	THOIGIANBAOHANH INTEGER NOT NULL,
	NGAYMUA DATE NOT NULL,
	NGAYHETHAN DATE NOT NULL,
	CONSTRAINT PK_PBH PRIMARY KEY(MAPBH),
	CONSTRAINT FK_PBH_KH FOREIGN KEY(MAKH) REFERENCES LK.KHACHHANG(MAKH)
);
GRANT ALL ON TABLE LK.PHIEUBAOHANH TO DB2ADMIN;


CREATE TABLE LK.KHACHHANG(
	MAKH VARCHAR(4) NOT NULL,
	TENKHACHHNAG VARCHAR(100) NOT NULL,
	GIOITINH CHAR(1) NOT NULL,
	DIACHI VARCHAR(50) NOT NULL,
	SDT INTEGER NOT NULL,
	CONSTRAINT PK_KH PRIMARY KEY(MAKH)
);
GRANT ALL ON TABLE LK.KHACHHANG TO DB2ADMIN;


CREATE TABLE LK.HOADONBANLE(
	MAHDBL VARCHAR(10) NOT NULL,
	MANV VARCHAR(4) NOT NULL,
	MAKH VARCHAR(4) NOT NULL,
	TONGTIEN INTEGER NOT NULL,
	NGAYBAN DATE NOT NULL,
	CONSTRAINT PK_HDBL PRIMARY KEY(MAHDBL),
	CONSTRAINT FK_HDBL_NV FOREIGN KEY(MANV) REFERENCES LK.NHANVIEN(MANV),
	CONSTRAINT FK_HDBL_KH FOREIGN KEY(MAKH) REFERENCES LK.KHACHHANG(MAKH)
	
);
GRANT ALL ON TABLE LK.HOADONBANLE TO DB2ADMIN;

CREATE TABLE LK.CTHDBANLE(
	ID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY(START WITH 1, INCREMENT BY 1, NO CACHE),
	MALINHKIEN VARCHAR(20) NOT NULL,
	MAHDBL VARCHAR(10) NOT NULL,
	DONGIA INTEGER NOT NULL,
	SOLUONG INTEGER NOT NULL,
	GIAMGIA INTEGER NOT NULL,
	TONGTIEN INTEGER NOT NULL,
	NGAYBAN DATE NOT NULL,
	CONSTRAINT PK_CTHDBL PRIMARY KEY(MAHDBL),
	CONSTRAINT FK_CTHDBL_LK FOREIGN KEY(MALINHKIEN) REFERENCES LK.LINHKIEN(MALINHKIEN),
	CONSTRAINT FK_CTHDBL_HDBL FOREIGN KEY(MAHDBL) REFERENCES LK.HOADONBANLE(MAHDBL)
	
);
GRANT ALL ON TABLE LK.CTHDBANLE TO DB2ADMIN;

CREATE TABLE LK.HOADONBANSI(
	MAHDBS VARCHAR(10) NOT NULL,
	MANV VARCHAR(4) NOT NULL,
	MAKH VARCHAR(4) NOT NULL,
	SOLANTRA INTEGER NOT NULL,
	TONGTIEN INTEGER NOT NULL,
	NGAYLAP DATE NOT NULL,
	CONSTRAINT PK_HDBS PRIMARY KEY(MAHDBS),
	CONSTRAINT FK_HDBS_NV FOREIGN KEY(MANV) REFERENCES LK.NHANVIEN(MANV),
	CONSTRAINT FK_HDBS_KH FOREIGN KEY(MAKH) REFERENCES LK.KHACHHANG(MAKH)
);
GRANT ALL ON TABLE LK.HOADONBANSI TO DB2ADMIN;
CREATE TABLE LK.CTHDBANSI(
	ID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY(START WITH 1, INCREMENT BY 1, NO CACHE),
	MALINHKIEN VARCHAR(20) NOT NULL,
	MAHDBS VARCHAR(10) NOT NULL,
	DONGIA INTEGER NOT NULL,
	SOLUONG INTEGER NOT NULL,
	GIAMGIA INTEGER NOT NULL,
	TONGTIEN INTEGER NOT NULL,
	SOLANTRA INTEGER NOT NULL,
	NGAYLAP DATE NOT NULL,
	CONSTRAINT PK_CTHDBS PRIMARY KEY(ID),
	CONSTRAINT FK_CTHDBS_LK FOREIGN KEY(MALINHKIEN) REFERENCES LK.LINHKIEN(MALINHKIEN),
	CONSTRAINT FK_CTHDBS_HDBS FOREIGN KEY(MAHDBS) REFERENCES LK.HOADONBANSI(MAHDBS)
	
);

GRANT ALL ON TABLE LK.CTHDBANSI TO DB2ADMIN;

CREATE TABLE LK.TAIKHOAN(
	ID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY(START WITH 1, INCREMENT BY 1, NO CACHE),
	MANV VARCHAR(4) NOT NULL,
	MATKHAU VARCHAR(100) NOT NULL,
	QUYEN SMALLINT NOT NULL,
	CONSTRAINT PK_TK PRIMARY KEY(ID),
	CONSTRAINT FK_TK_NV FOREIGN KEY(MANV) REFERENCES LK.NHANVIEN(MANV)
);

